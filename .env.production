# ===========================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# Spanish Class Platform - unlimited.rs Hosting
# ===========================================
#
# SECURITY WARNING: Never commit this file to version control!
# This file contains sensitive production credentials.
#
# Instructions:
# 1. Copy this file to each package that needs it:
#    - packages/backend/.env
#    - packages/frontend/.env.production
# 2. Replace all placeholder values with your actual credentials
# 3. Ensure this file has restricted permissions: chmod 600 .env
#

# ===========================================
# BACKEND ENVIRONMENT VARIABLES
# Location: packages/backend/.env
# ===========================================

# ----------------- DATABASE -----------------
# IMPORTANT: Get these values from cPanel â†’ MySQL Databases
# Format: mysql://[USERNAME]:[PASSWORD]@localhost:3306/[DATABASE_NAME]
#
# Example: mysql://myuser_spanish_app:SecurePass123@localhost:3306/myuser_spanish_class
#
# Replace with your values:
# - USERNAME: Your cPanel username + underscore + database username (e.g., myuser_spanish_app)
# - PASSWORD: The password you set for the database user
# - DATABASE_NAME: Your cPanel username + underscore + database name (e.g., myuser_spanish_class)
#
DATABASE_URL="mysql://YOUR_CPANEL_USERNAME_dbuser:YOUR_DB_PASSWORD@localhost:3306/YOUR_CPANEL_USERNAME_dbname"

# ----------------- JWT AUTHENTICATION -----------------
# Generate a secure random string (minimum 32 characters)
# You can generate one using: openssl rand -base64 32
# IMPORTANT: Keep this secret! Anyone with this can forge authentication tokens.
#
JWT_SECRET="REPLACE_WITH_SECURE_RANDOM_STRING_MIN_32_CHARS"
JWT_EXPIRES_IN="7d"

# ----------------- GOOGLE CALENDAR API (OPTIONAL) -----------------
# Only needed if you want Google Calendar integration
# Leave empty or commented out if not using
#
# To set up:
# 1. Create a Google Cloud Project: https://console.cloud.google.com
# 2. Enable Google Calendar API
# 3. Create a Service Account
# 4. Download JSON key file
# 5. Copy the service account email and private key here
#
# GOOGLE_SERVICE_ACCOUNT_EMAIL="your-service-account@your-project.iam.gserviceaccount.com"
# GOOGLE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYour_Private_Key_Here\n-----END PRIVATE KEY-----"
# GOOGLE_CALENDAR_ID="primary"

# ----------------- EMAIL SERVICE (RESEND) -----------------
# Only needed if you want email notifications (registration, bookings, etc.)
# Leave empty if not using email features
#
# To set up:
# 1. Sign up at https://resend.com
# 2. Verify your domain
# 3. Create an API key
# 4. Copy the API key here
#
# RESEND_API_KEY="re_YourResendApiKey"
# EMAIL_FROM="Spanish Class <noreply@yourdomain.com>"
# PROFESSOR_EMAIL="professor@yourdomain.com"

# ----------------- APPLICATION URLS -----------------
# CRITICAL: Replace with your actual domain URLs
# Use HTTPS in production (after SSL certificate is installed)
#
# If using subdomain for API:
#   FRONTEND_URL="https://yourdomain.com"
#   API_URL="https://api.yourdomain.com"
#
# If using path-based API:
#   FRONTEND_URL="https://yourdomain.com"
#   API_URL="https://yourdomain.com/api"
#
FRONTEND_URL="https://YOUR_DOMAIN.com"
API_URL="https://YOUR_DOMAIN.com/api"

# ----------------- NODE ENVIRONMENT -----------------
NODE_ENV="production"
PORT=3001

# ===========================================
# FRONTEND ENVIRONMENT VARIABLES
# Location: packages/frontend/.env.production
# ===========================================

# The frontend needs to know where the backend API is located
# This should match the API_URL above
#
# VITE_API_URL="https://YOUR_DOMAIN.com/api"
# OR if using subdomain:
# VITE_API_URL="https://api.YOUR_DOMAIN.com"


# ===========================================
# DEPLOYMENT CHECKLIST
# ===========================================
#
# Before deploying, ensure you have:
#
# DATABASE:
#  [ ] Created MySQL database in cPanel
#  [ ] Created database user with strong password
#  [ ] Granted ALL PRIVILEGES to user
#  [ ] Updated DATABASE_URL with correct values (including cPanel username prefix)
#
# SECURITY:
#  [ ] Generated secure JWT_SECRET (min 32 characters)
#  [ ] Set file permissions: chmod 600 .env
#  [ ] Verified .env is in .gitignore
#  [ ] Installed SSL certificate (Let's Encrypt via cPanel)
#
# APPLICATION URLS:
#  [ ] Updated FRONTEND_URL to your actual domain
#  [ ] Updated API_URL to your actual API endpoint
#  [ ] Updated VITE_API_URL in frontend .env.production
#  [ ] All URLs use HTTPS (after SSL installation)
#
# OPTIONAL SERVICES:
#  [ ] Configured Resend API for emails (if needed)
#  [ ] Set up Google Calendar integration (if needed)
#  [ ] Configured professor email address
#
# DEPLOYMENT:
#  [ ] Ran: pnpm install
#  [ ] Ran: pnpm db:generate
#  [ ] Ran: pnpm db:push
#  [ ] Ran: pnpm build (both frontend and backend)
#  [ ] Copied frontend build to public_html
#  [ ] Started backend via cPanel Node.js or PM2
#  [ ] Configured .htaccess for routing and API proxy
#
# VERIFICATION:
#  [ ] Backend health check works: curl https://yourdomain.com/api/health
#  [ ] Frontend loads in browser
#  [ ] Can register new user
#  [ ] Can login
#  [ ] Database tables created successfully
#  [ ] No CORS errors in browser console
#  [ ] SSL certificate active (green padlock)
#
# ===========================================
# QUICK REFERENCE
# ===========================================
#
# Generate secure JWT secret:
#   openssl rand -base64 32
#
# Test database connection (on server):
#   cd ~/spanish-class/packages/backend
#   pnpm db:push
#
# View backend logs (if using PM2):
#   pm2 logs spanish-class-api
#
# Restart backend (if using PM2):
#   pm2 restart spanish-class-api
#
# ===========================================
